<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qucs-core: dataset.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Qucs-core
   &#160;<span id="projectnumber">0.0.19</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">dataset.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="dataset_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * dataset.cpp - dataset class implementation</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * Copyright (C) 2003, 2004, 2005, 2006, 2007 Stefan Jahn &lt;stefan@lkcc.org&gt;</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment"> * the Free Software Foundation; either version 2, or (at your option)</span>
<a name="l00009"></a>00009 <span class="comment"> * any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This software is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> * along with this package; see the file COPYING.  If not, write to</span>
<a name="l00018"></a>00018 <span class="comment"> * the Free Software Foundation, Inc., 51 Franklin Street - Fifth Floor,</span>
<a name="l00019"></a>00019 <span class="comment"> * Boston, MA 02110-1301, USA.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * $Id$</span>
<a name="l00022"></a>00022 <span class="comment"> *</span>
<a name="l00023"></a>00023 <span class="comment"> */</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#if HAVE_CONFIG_H</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="preprocessor"># include &lt;<a class="code" href="config_8h.html">config.h</a>&gt;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#endif</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;errno.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;assert.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="logging_8h.html">logging.h</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="complex_8h.html">complex.h</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="object_8h.html">object.h</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="strlist_8h.html">strlist.h</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="vector_8h.html">vector.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="dataset_8h.html">dataset.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="check__dataset_8h.html">check_dataset.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="check__touchstone_8h.html">check_touchstone.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="check__csv_8h.html">check_csv.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="check__citi_8h.html">check_citi.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="check__zvr_8h.html">check_zvr.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="check__mdl_8h.html">check_mdl.h</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="keyword">namespace </span><a class="code" href="structqucs.html">qucs</a> {
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">// Constructor creates an unnamed instance of the dataset class.</span>
<a name="l00052"></a><a class="code" href="classqucs_1_1dataset.html#ae9740f08d351a264518064c4587ade6d">00052</a> dataset::dataset () : <a class="code" href="classqucs_1_1object.html" title="generic object class.">object</a> () {
<a name="l00053"></a>00053   <a class="code" href="classqucs_1_1dataset.html#aa51bbfb65a006c148537b1bdc39fda4b">variables</a> = <a class="code" href="classqucs_1_1dataset.html#a6be4af25bca836d26e919f0a3760cf86">dependencies</a> = NULL;
<a name="l00054"></a>00054   <a class="code" href="classqucs_1_1dataset.html#a16f6a1b5f4d28b82eb5f872aaa92fe3f">file</a> = NULL;
<a name="l00055"></a>00055 }
<a name="l00056"></a>00056 
<a name="l00057"></a>00057 <span class="comment">// Constructor creates an named instance of the dataset class.</span>
<a name="l00058"></a><a class="code" href="classqucs_1_1dataset.html#a1f0ebdefa360030cbcf6c39826434543">00058</a> dataset::dataset (<span class="keywordtype">char</span> * <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>) : <a class="code" href="classqucs_1_1object.html" title="generic object class.">object</a> (n) {
<a name="l00059"></a>00059   <a class="code" href="classqucs_1_1dataset.html#aa51bbfb65a006c148537b1bdc39fda4b">variables</a> = <a class="code" href="classqucs_1_1dataset.html#a6be4af25bca836d26e919f0a3760cf86">dependencies</a> = NULL;
<a name="l00060"></a>00060   <a class="code" href="classqucs_1_1dataset.html#a16f6a1b5f4d28b82eb5f872aaa92fe3f">file</a> = NULL;
<a name="l00061"></a>00061 }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">/* The copy constructor creates a new instance based on the given</span>
<a name="l00064"></a>00064 <span class="comment">   dataset object. */</span>
<a name="l00065"></a><a class="code" href="classqucs_1_1dataset.html#a761e0f6ec9d7528f7cfe20713e7fdf18">00065</a> dataset::dataset (<span class="keyword">const</span> <a class="code" href="classqucs_1_1dataset.html">dataset</a> &amp; <a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>) : <a class="code" href="classqucs_1_1object.html" title="generic object class.">object</a> (d) {
<a name="l00066"></a>00066   <a class="code" href="classqucs_1_1dataset.html#a16f6a1b5f4d28b82eb5f872aaa92fe3f">file</a> = d.<a class="code" href="classqucs_1_1dataset.html#a16f6a1b5f4d28b82eb5f872aaa92fe3f">file</a> ? strdup (d.<a class="code" href="classqucs_1_1dataset.html#a16f6a1b5f4d28b82eb5f872aaa92fe3f">file</a>) : NULL;
<a name="l00067"></a>00067   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00068"></a>00068   <span class="comment">// copy dependency vectors</span>
<a name="l00069"></a>00069   <span class="keywordflow">for</span> (v = d.<a class="code" href="classqucs_1_1dataset.html#a6be4af25bca836d26e919f0a3760cf86">dependencies</a>; v != NULL; v = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) {
<a name="l00070"></a>00070     <a class="code" href="classqucs_1_1dataset.html#aa74c310a3169ce14bc6c3ec1ecda8d85">addDependency</a> (<span class="keyword">new</span> <a class="code" href="classqucs_1_1vector.html">vector</a> (*v));
<a name="l00071"></a>00071   }
<a name="l00072"></a>00072   <span class="comment">// copy variable vectors</span>
<a name="l00073"></a>00073   <span class="keywordflow">for</span> (v = <a class="code" href="classqucs_1_1dataset.html#aa51bbfb65a006c148537b1bdc39fda4b">variables</a>; v != NULL; v = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) {
<a name="l00074"></a>00074     <a class="code" href="classqucs_1_1dataset.html#a2b5cff535fa0d80cd19b230834a9d2b0">addVariable</a> (<span class="keyword">new</span> <a class="code" href="classqucs_1_1vector.html">vector</a> (*v));
<a name="l00075"></a>00075   }
<a name="l00076"></a>00076 }
<a name="l00077"></a>00077 
<a name="l00078"></a>00078 <span class="comment">// Destructor deletes a dataset object.</span>
<a name="l00079"></a><a class="code" href="classqucs_1_1dataset.html#a775a3a91275e08cc40de3bd965ed1faa">00079</a> dataset::~dataset () {
<a name="l00080"></a>00080   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>, * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00081"></a>00081   <span class="comment">// delete dependency vectors</span>
<a name="l00082"></a>00082   <span class="keywordflow">for</span> (v = dependencies; v != NULL; v = <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>) {
<a name="l00083"></a>00083     n = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00084"></a>00084     <span class="keyword">delete</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00085"></a>00085   }
<a name="l00086"></a>00086   <span class="comment">// delete variable vectors</span>
<a name="l00087"></a>00087   <span class="keywordflow">for</span> (v = variables; v != NULL; v = <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>) {
<a name="l00088"></a>00088     n = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00089"></a>00089     <span class="keyword">delete</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00090"></a>00090   }
<a name="l00091"></a>00091   <span class="keywordflow">if</span> (file) <a class="code" href="parse__dataset_8y.html#aca85a6c1a76f5805917a20a5efec7664">free</a> (file);
<a name="l00092"></a>00092 }
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="comment">// This function adds a dependency vector to the current dataset.</span>
<a name="l00095"></a><a class="code" href="classqucs_1_1dataset.html#aa74c310a3169ce14bc6c3ec1ecda8d85">00095</a> <span class="keywordtype">void</span> dataset::addDependency (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00096"></a>00096   <span class="keywordflow">if</span> (dependencies) dependencies-&gt;setPrev (v);
<a name="l00097"></a>00097   v-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (dependencies);
<a name="l00098"></a>00098   v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00099"></a>00099   dependencies = <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00100"></a>00100 }
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">// This function removes a dependency vector from the current dataset.</span>
<a name="l00103"></a><a class="code" href="classqucs_1_1dataset.html#a0041334202ec3fa070cf02189c08d70d">00103</a> <span class="keywordtype">void</span> dataset::delDependency (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00104"></a>00104   <span class="keywordflow">if</span> (dependencies == v) {
<a name="l00105"></a>00105     dependencies = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00106"></a>00106     <span class="keywordflow">if</span> (dependencies) dependencies-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00107"></a>00107   }
<a name="l00108"></a>00108   <span class="keywordflow">else</span> {
<a name="l00109"></a>00109     <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00110"></a>00110     <a class="code" href="classqucs_1_1vector.html">vector</a> * prev = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#a3d490094a3c2c1b9642daaceef7a01b2">getPrev</a> ();
<a name="l00111"></a>00111     prev-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (next);
<a name="l00112"></a>00112     <span class="keywordflow">if</span> (next) next-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (prev);
<a name="l00113"></a>00113   }
<a name="l00114"></a>00114   <span class="keyword">delete</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00115"></a>00115 }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="comment">/* The function adds the given list of vectors to the dependency set</span>
<a name="l00118"></a>00118 <span class="comment">   of the current dataset. */</span>
<a name="l00119"></a><a class="code" href="classqucs_1_1dataset.html#a46050838d68019a4d22e546d89a5b6df">00119</a> <span class="keywordtype">void</span> dataset::addDependencies (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00120"></a>00120   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>;
<a name="l00121"></a>00121   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = v; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> != NULL; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>) {
<a name="l00122"></a>00122     next = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getNext ();
<a name="l00123"></a>00123     addDependency (<a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>);
<a name="l00124"></a>00124   }
<a name="l00125"></a>00125 }
<a name="l00126"></a>00126 
<a name="l00127"></a>00127 <span class="comment">// This function appends a dependency vector to the current dataset.</span>
<a name="l00128"></a><a class="code" href="classqucs_1_1dataset.html#a2aea0af2a5e92c818c54b832cd2ef4de">00128</a> <span class="keywordtype">void</span> dataset::appendDependency (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00129"></a>00129   <a class="code" href="classqucs_1_1vector.html">vector</a> * e;
<a name="l00130"></a>00130   <span class="keywordflow">if</span> (dependencies) {
<a name="l00131"></a>00131     <span class="keywordflow">for</span> (e = dependencies; e-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> (); e = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) e-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) ;
<a name="l00132"></a>00132     v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (e);
<a name="l00133"></a>00133     e-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (v);
<a name="l00134"></a>00134   }
<a name="l00135"></a>00135   <span class="keywordflow">else</span> {
<a name="l00136"></a>00136     v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00137"></a>00137     dependencies= <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00138"></a>00138   }
<a name="l00139"></a>00139   v-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (NULL);
<a name="l00140"></a>00140 }
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="comment">/* The function appends the given list of vectors to the dependency</span>
<a name="l00143"></a>00143 <span class="comment">   set of the current dataset. */</span>
<a name="l00144"></a><a class="code" href="classqucs_1_1dataset.html#a01b7ae5be7b6098ab95bc8cb2aa446ca">00144</a> <span class="keywordtype">void</span> dataset::appendDependencies (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00145"></a>00145   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>;
<a name="l00146"></a>00146   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = v; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> != NULL; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>) {
<a name="l00147"></a>00147     next = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getNext ();
<a name="l00148"></a>00148     appendDependency (<a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>);
<a name="l00149"></a>00149   }
<a name="l00150"></a>00150 }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152 <span class="comment">// This function adds a variable vector to the current dataset.</span>
<a name="l00153"></a><a class="code" href="classqucs_1_1dataset.html#a2b5cff535fa0d80cd19b230834a9d2b0">00153</a> <span class="keywordtype">void</span> dataset::addVariable (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00154"></a>00154   <span class="keywordflow">if</span> (variables) variables-&gt;setPrev (v);
<a name="l00155"></a>00155   v-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (variables);
<a name="l00156"></a>00156   v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00157"></a>00157   variables = <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">// This function removes a variable vector from the current dataset.</span>
<a name="l00161"></a><a class="code" href="classqucs_1_1dataset.html#a4fcb5ed1e68ab2aa3ae239c5261e815c">00161</a> <span class="keywordtype">void</span> dataset::delVariable (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00162"></a>00162   <span class="keywordflow">if</span> (variables == v) {
<a name="l00163"></a>00163     variables = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00164"></a>00164     <span class="keywordflow">if</span> (variables) variables-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00165"></a>00165   }
<a name="l00166"></a>00166   <span class="keywordflow">else</span> {
<a name="l00167"></a>00167     <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ();
<a name="l00168"></a>00168     <a class="code" href="classqucs_1_1vector.html">vector</a> * prev = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#a3d490094a3c2c1b9642daaceef7a01b2">getPrev</a> ();
<a name="l00169"></a>00169     prev-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (next);
<a name="l00170"></a>00170     <span class="keywordflow">if</span> (next) next-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (prev);
<a name="l00171"></a>00171   }
<a name="l00172"></a>00172   <span class="keyword">delete</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 <span class="comment">/* The function adds the given list of vectors to the variable set of</span>
<a name="l00176"></a>00176 <span class="comment">   the current dataset. */</span>
<a name="l00177"></a><a class="code" href="classqucs_1_1dataset.html#a381a760841cb2ab74c2d3aa395cc42d6">00177</a> <span class="keywordtype">void</span> dataset::addVariables (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00178"></a>00178   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>;
<a name="l00179"></a>00179   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = v; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> != NULL; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>) {
<a name="l00180"></a>00180     next = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getNext ();
<a name="l00181"></a>00181     addVariable (<a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>);
<a name="l00182"></a>00182   }
<a name="l00183"></a>00183 }
<a name="l00184"></a>00184 
<a name="l00185"></a>00185 <span class="comment">// This function appends a variable vector to the current dataset.</span>
<a name="l00186"></a><a class="code" href="classqucs_1_1dataset.html#a0d3ca591ad5cc2dd3dc0b6f9ad13d057">00186</a> <span class="keywordtype">void</span> <a class="code" href="parse__dataset_8y.html#abc744f79b4247bbde43702e84dc434dc">dataset::appendVariable</a> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00187"></a>00187   <a class="code" href="classqucs_1_1vector.html">vector</a> * e;
<a name="l00188"></a>00188   <span class="keywordflow">if</span> (variables) {
<a name="l00189"></a>00189     <span class="keywordflow">for</span> (e = variables; e-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> (); e = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) e-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) ;
<a name="l00190"></a>00190     v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (e);
<a name="l00191"></a>00191     e-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (v);
<a name="l00192"></a>00192   }
<a name="l00193"></a>00193   <span class="keywordflow">else</span> {
<a name="l00194"></a>00194     v-&gt;<a class="code" href="classqucs_1_1vector.html#a5c4ce31e359a9f0097be38020852d548">setPrev</a> (NULL);
<a name="l00195"></a>00195     variables = <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00196"></a>00196   }
<a name="l00197"></a>00197   v-&gt;<a class="code" href="classqucs_1_1vector.html#ab960cc4cc80118423c67050e4d88c5a4">setNext</a> (NULL);
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 <span class="comment">/* The function appends the given list of vectors to the variable set</span>
<a name="l00201"></a>00201 <span class="comment">   of the current dataset. */</span>
<a name="l00202"></a><a class="code" href="classqucs_1_1dataset.html#a97a8dbb0b7137de5a343270fb712e8a1">00202</a> <span class="keywordtype">void</span> dataset::appendVariables (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00203"></a>00203   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>;
<a name="l00204"></a>00204   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = v; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> != NULL; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>) {
<a name="l00205"></a>00205     next = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getNext ();
<a name="l00206"></a>00206     <a class="code" href="parse__dataset_8y.html#abc744f79b4247bbde43702e84dc434dc">appendVariable</a> (<a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>);
<a name="l00207"></a>00207   }
<a name="l00208"></a>00208 }
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/* This function applies the dependency string list of the given</span>
<a name="l00211"></a>00211 <span class="comment">   vector to the list of vectors appended to this vector. */</span>
<a name="l00212"></a><a class="code" href="classqucs_1_1dataset.html#a2ec74a4253213c6b0531341f9dd633b8">00212</a> <span class="keywordtype">void</span> dataset::applyDependencies (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>) {
<a name="l00213"></a>00213   <a class="code" href="classqucs_1_1strlist.html">strlist</a> * deps = v-&gt;<a class="code" href="classqucs_1_1vector.html#ad52f7269b3ed8835ca4e520d44914b90">getDependencies</a> ();
<a name="l00214"></a>00214   <span class="keywordflow">if</span> (deps != NULL) {
<a name="l00215"></a>00215     <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>;
<a name="l00216"></a>00216     <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> (); <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> != NULL; <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a> = <a class="code" href="parse__spice_8y.html#acde7555eca71d1f823fbaf6f6a1f4670">next</a>) {
<a name="l00217"></a>00217       next = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getNext ();
<a name="l00218"></a>00218       <span class="keywordflow">if</span> (<a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;getDependencies () == NULL) {
<a name="l00219"></a>00219         <a class="code" href="parse__vcd_8y.html#aaccc9105df5383111407fd5b41255e23">t</a>-&gt;setDependencies (<span class="keyword">new</span> <a class="code" href="classqucs_1_1strlist.html">strlist</a> (*deps));
<a name="l00220"></a>00220       }
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222   }
<a name="l00223"></a>00223 }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225 <span class="comment">/* This function returns the dataset vector (both independent and</span>
<a name="l00226"></a>00226 <span class="comment">   dependent) with the given origin.  It returns NULL if there is no</span>
<a name="l00227"></a>00227 <span class="comment">   such vector. */</span>
<a name="l00228"></a><a class="code" href="classqucs_1_1dataset.html#a6899d9831531ffad8efe39da14573da6">00228</a> <a class="code" href="classqucs_1_1vector.html">vector</a> * dataset::findOrigin (<span class="keywordtype">char</span> * <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>) {
<a name="l00229"></a>00229   <a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00230"></a>00230   <span class="keywordflow">for</span> (v = variables; v != NULL; v = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) {
<a name="l00231"></a>00231     <span class="keywordtype">char</span> * origin = v-&gt;<a class="code" href="classqucs_1_1vector.html#af1fec97380ea6f2d0d8deca7e339ce55">getOrigin</a> ();
<a name="l00232"></a>00232     <span class="keywordflow">if</span> (origin != NULL &amp;&amp; n != NULL &amp;&amp; !strcmp (n, origin))
<a name="l00233"></a>00233       <span class="keywordflow">return</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00234"></a>00234   }
<a name="l00235"></a>00235   <span class="keywordflow">for</span> (v = dependencies; v != NULL; v = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) v-&gt;<a class="code" href="classqucs_1_1vector.html#afc20bfbdf24e88096add4c5535d24fb7">getNext</a> ()) {
<a name="l00236"></a>00236     <span class="keywordtype">char</span> * origin = v-&gt;<a class="code" href="classqucs_1_1vector.html#af1fec97380ea6f2d0d8deca7e339ce55">getOrigin</a> ();
<a name="l00237"></a>00237     <span class="keywordflow">if</span> (origin != NULL &amp;&amp; n != NULL &amp;&amp; !strcmp (n, origin))
<a name="l00238"></a>00238       <span class="keywordflow">return</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00239"></a>00239   }
<a name="l00240"></a>00240   <span class="keywordflow">return</span> NULL;
<a name="l00241"></a>00241 }
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">/* This function assigns dependency entries to variable vectors which</span>
<a name="l00244"></a>00244 <span class="comment">   do have the specified origin. */</span>
<a name="l00245"></a><a class="code" href="classqucs_1_1dataset.html#a56076ea4f54b15541ab2c45f042b079a">00245</a> <span class="keywordtype">void</span> dataset::assignDependency (<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> origin, <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> depvar) {
<a name="l00246"></a>00246   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = variables; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ()) {
<a name="l00247"></a>00247     <span class="keywordtype">char</span> * <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a> = <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getOrigin ();
<a name="l00248"></a>00248     <span class="keywordflow">if</span> (n != NULL &amp;&amp; origin != NULL &amp;&amp; !strcmp (origin, n)) {
<a name="l00249"></a>00249       <a class="code" href="classqucs_1_1strlist.html">strlist</a> * deplist = <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getDependencies ();
<a name="l00250"></a>00250       <span class="keywordflow">if</span> (deplist != NULL) {
<a name="l00251"></a>00251         <span class="keywordflow">if</span> (!deplist-&gt;<a class="code" href="classqucs_1_1strlist.html#a8e657e494a9b9dd2b9d61133b341c615">contains</a> (depvar)) {
<a name="l00252"></a>00252           deplist-&gt;<a class="code" href="classqucs_1_1strlist.html#af15a0c9e189fec852666a2a45dc830f1">append</a> (depvar);
<a name="l00253"></a>00253         }
<a name="l00254"></a>00254       }
<a name="l00255"></a>00255       <span class="keywordflow">else</span> {
<a name="l00256"></a>00256         deplist = <span class="keyword">new</span> <a class="code" href="classqucs_1_1strlist.html">strlist</a> ();
<a name="l00257"></a>00257         deplist-&gt;<a class="code" href="classqucs_1_1strlist.html#a5ea39ba0cea73ced0ac612832b159c39">add</a> (depvar);
<a name="l00258"></a>00258         <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;setDependencies (deplist);
<a name="l00259"></a>00259       }
<a name="l00260"></a>00260     }
<a name="l00261"></a>00261   }
<a name="l00262"></a>00262 }
<a name="l00263"></a>00263 
<a name="l00264"></a>00264 <span class="comment">// Return non-zero if the given vector is an independent variable vector.</span>
<a name="l00265"></a><a class="code" href="classqucs_1_1dataset.html#ab72c53fc84950432efd1a86b65b5e206">00265</a> <span class="keywordtype">int</span> dataset::isDependency (<a class="code" href="classqucs_1_1vector.html">vector</a> * dep) {
<a name="l00266"></a>00266   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = dependencies; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ())
<a name="l00267"></a>00267     <span class="keywordflow">if</span> (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> == dep) <span class="keywordflow">return</span> 1;
<a name="l00268"></a>00268   <span class="keywordflow">return</span> 0;
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="comment">// Return non-zero if the given vector is a dependent variable vector.</span>
<a name="l00272"></a><a class="code" href="classqucs_1_1dataset.html#a20d829debc07d051103144d5fe5085bc">00272</a> <span class="keywordtype">int</span> dataset::isVariable (<a class="code" href="classqucs_1_1vector.html">vector</a> * var) {
<a name="l00273"></a>00273   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = variables; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ())
<a name="l00274"></a>00274     <span class="keywordflow">if</span> (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> == var) <span class="keywordflow">return</span> 1;
<a name="l00275"></a>00275   <span class="keywordflow">return</span> 0;
<a name="l00276"></a>00276 }
<a name="l00277"></a>00277 
<a name="l00278"></a>00278 <span class="comment">/* The function goes through the list of dependencies in the dataset</span>
<a name="l00279"></a>00279 <span class="comment">   and returns the vector specified by the given name.  Otherwise the</span>
<a name="l00280"></a>00280 <span class="comment">   function returns NULL. */</span>
<a name="l00281"></a><a class="code" href="classqucs_1_1dataset.html#a8c0c361b14df83192589f464ce08f497">00281</a> <a class="code" href="classqucs_1_1vector.html">vector</a> * dataset::findDependency (<span class="keyword">const</span> <span class="keywordtype">char</span> * <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>) {
<a name="l00282"></a>00282   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = dependencies; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ()) {
<a name="l00283"></a>00283     <span class="keywordflow">if</span> (!strcmp (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getName (), <a class="code" href="parse__mdl_8y.html#aecba4cab5e52994730d1e21424997b33">n</a>))
<a name="l00284"></a>00284       <span class="keywordflow">return</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00285"></a>00285   }
<a name="l00286"></a>00286   <span class="keywordflow">return</span> NULL;
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 <span class="comment">/* The function goes through the list of variables in the dataset and</span>
<a name="l00290"></a>00290 <span class="comment">   returns the vector specified by the given name.  If there is no</span>
<a name="l00291"></a>00291 <span class="comment">   such variable registered the function returns NULL. */</span>
<a name="l00292"></a><a class="code" href="classqucs_1_1dataset.html#a69acdc12cb2f2add58f3e059727de0b1">00292</a> <a class="code" href="classqucs_1_1vector.html">vector</a> * dataset::findVariable (<span class="keyword">const</span> <a class="code" href="namespacetesting_1_1internal.html#a5ca8a348395a6145775c1a2334e21889">std::string</a> &amp;<a class="code" href="parse__mdl_8y.html#a9936388dcd0f5b4388f9863ec29f17e4">name</a>) {
<a name="l00293"></a>00293   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = variables; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ()) {
<a name="l00294"></a>00294     <span class="keywordflow">if</span> (!strcmp (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getName (), name.c_str()))
<a name="l00295"></a>00295       <span class="keywordflow">return</span> <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>;
<a name="l00296"></a>00296   }
<a name="l00297"></a>00297   <span class="keywordflow">return</span> NULL;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 
<a name="l00300"></a>00300 <span class="comment">// Returns the number of variable vectors.</span>
<a name="l00301"></a><a class="code" href="classqucs_1_1dataset.html#ad216f601b7070ded18f9920e431cbe5e">00301</a> <span class="keywordtype">int</span> dataset::countVariables (<span class="keywordtype">void</span>) {
<a name="l00302"></a>00302   <span class="keywordtype">int</span> count = 0;
<a name="l00303"></a>00303   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = variables; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ())
<a name="l00304"></a>00304     count++;
<a name="l00305"></a>00305   <span class="keywordflow">return</span> count;
<a name="l00306"></a>00306 }
<a name="l00307"></a>00307 
<a name="l00308"></a>00308 <span class="comment">// Returns the number of dependency vectors.</span>
<a name="l00309"></a><a class="code" href="classqucs_1_1dataset.html#a8e753f5ca5257df89e7869f23b7680a7">00309</a> <span class="keywordtype">int</span> dataset::countDependencies (<span class="keywordtype">void</span>) {
<a name="l00310"></a>00310   <span class="keywordtype">int</span> count = 0;
<a name="l00311"></a>00311   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = dependencies; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ())
<a name="l00312"></a>00312     count++;
<a name="l00313"></a>00313   <span class="keywordflow">return</span> count;
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a>00316 <span class="comment">// Returns the current output file name.</span>
<a name="l00317"></a><a class="code" href="classqucs_1_1dataset.html#aa0467102e6a14e2ece63643febe8aebb">00317</a> <span class="keywordtype">char</span> * dataset::getFile (<span class="keywordtype">void</span>) {
<a name="l00318"></a>00318   <span class="keywordflow">return</span> file;
<a name="l00319"></a>00319 }
<a name="l00320"></a>00320 
<a name="l00321"></a>00321 <span class="comment">/* Sets the current output file name.  The file name is used during</span>
<a name="l00322"></a>00322 <span class="comment">   the print functionality of the dataset class. */</span>
<a name="l00323"></a><a class="code" href="classqucs_1_1dataset.html#a6708a60b63f34f8c8c3e49c747c4a9c2">00323</a> <span class="keywordtype">void</span> dataset::setFile (<span class="keyword">const</span> <span class="keywordtype">char</span> * f) {
<a name="l00324"></a>00324   <span class="keywordflow">if</span> (file) <a class="code" href="parse__dataset_8y.html#aca85a6c1a76f5805917a20a5efec7664">free</a> (file);
<a name="l00325"></a>00325   file = f ? strdup (f) : NULL;
<a name="l00326"></a>00326 }
<a name="l00327"></a>00327 
<a name="l00328"></a>00328 <span class="comment">/* This function prints the current dataset representation either to</span>
<a name="l00329"></a>00329 <span class="comment">   the specified file name (given by the function setFile()) or to</span>
<a name="l00330"></a>00330 <span class="comment">   stdout if there is no such file name given. */</span>
<a name="l00331"></a><a class="code" href="classqucs_1_1dataset.html#aa9847190e12366a2f114e38caeab1afb">00331</a> <span class="keywordtype">void</span> dataset::print (<span class="keywordtype">void</span>) {
<a name="l00332"></a>00332 
<a name="l00333"></a>00333   FILE * f = stdout;
<a name="l00334"></a>00334 
<a name="l00335"></a>00335   <span class="comment">// open file for writing</span>
<a name="l00336"></a>00336   <span class="keywordflow">if</span> (file) {
<a name="l00337"></a>00337     <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;w&quot;</span>)) == NULL) {
<a name="l00338"></a>00338       <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;cannot create file `%s&#39;: %s\n&quot;</span>,
<a name="l00339"></a>00339                 file, strerror (errno));
<a name="l00340"></a>00340       <span class="keywordflow">return</span>;
<a name="l00341"></a>00341     }
<a name="l00342"></a>00342   }
<a name="l00343"></a>00343 
<a name="l00344"></a>00344   <span class="comment">// print header</span>
<a name="l00345"></a>00345   fprintf (f, <span class="stringliteral">&quot;&lt;Qucs Dataset &quot;</span> <a class="code" href="config_8h.html#aa326a05d5e30f9e9a4bb0b4469d5d0c0">PACKAGE_VERSION</a> <span class="stringliteral">&quot;&gt;\n&quot;</span>);
<a name="l00346"></a>00346 
<a name="l00347"></a>00347   <span class="comment">// print dependencies</span>
<a name="l00348"></a>00348   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = dependencies; <a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> != NULL; <a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>-&gt;getNext ()) {
<a name="l00349"></a>00349     printDependency (<a class="code" href="parse__spice_8y.html#a873684cefeb665f3d5e6b495de57fc0d">d</a>, f);
<a name="l00350"></a>00350   }
<a name="l00351"></a>00351 
<a name="l00352"></a>00352   <span class="comment">// print variables</span>
<a name="l00353"></a>00353   <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = variables; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> != NULL; <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a> = (<a class="code" href="classqucs_1_1vector.html">vector</a> *) <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getNext ()) {
<a name="l00354"></a>00354     <span class="keywordflow">if</span> (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>-&gt;getDependencies () != NULL)
<a name="l00355"></a>00355       printVariable (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>, f);
<a name="l00356"></a>00356     <span class="keywordflow">else</span>
<a name="l00357"></a>00357       printDependency (<a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>, f);
<a name="l00358"></a>00358   }
<a name="l00359"></a>00359 
<a name="l00360"></a>00360   <span class="comment">// close file if necessary</span>
<a name="l00361"></a>00361   <span class="keywordflow">if</span> (file) fclose (f);
<a name="l00362"></a>00362 }
<a name="l00363"></a>00363 
<a name="l00364"></a>00364 <span class="comment">/* Prints the given vector as independent dataset vector into the</span>
<a name="l00365"></a>00365 <span class="comment">   given file descriptor. */</span>
<a name="l00366"></a><a class="code" href="classqucs_1_1dataset.html#a47acfbb83960446b43e1b5e2990e6b59">00366</a> <span class="keywordtype">void</span> dataset::printDependency (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>, FILE * f) {
<a name="l00367"></a>00367   <span class="comment">// print data header</span>
<a name="l00368"></a>00368   fprintf (f, <span class="stringliteral">&quot;&lt;indep %s %d&gt;\n&quot;</span>, v-&gt;<a class="code" href="classqucs_1_1object.html#a3134f6d4b6abda0fb40ac2a9fb4344cc" title="Get the name of the object.">getName</a> (), v-&gt;<a class="code" href="classqucs_1_1vector.html#ad893d802d9c020bb3e39483d3ae1c81d">getSize</a> ());
<a name="l00369"></a>00369   <span class="comment">// print data itself</span>
<a name="l00370"></a>00370   printData (v, f);
<a name="l00371"></a>00371   <span class="comment">// print data footer</span>
<a name="l00372"></a>00372   fprintf (f, <span class="stringliteral">&quot;&lt;/indep&gt;\n&quot;</span>);
<a name="l00373"></a>00373 }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375 <span class="comment">/* Prints the given vector as dependent dataset vector into the given</span>
<a name="l00376"></a>00376 <span class="comment">   file descriptor. */</span>
<a name="l00377"></a><a class="code" href="classqucs_1_1dataset.html#a86a0b151c0b36b5f34aabe17973d2ea2">00377</a> <span class="keywordtype">void</span> dataset::printVariable (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>, FILE * f) {
<a name="l00378"></a>00378   <span class="comment">// print data header</span>
<a name="l00379"></a>00379   fprintf (f, <span class="stringliteral">&quot;&lt;dep %s&quot;</span>, v-&gt;<a class="code" href="classqucs_1_1object.html#a3134f6d4b6abda0fb40ac2a9fb4344cc" title="Get the name of the object.">getName</a> ());
<a name="l00380"></a>00380   <span class="keywordflow">if</span> (v-&gt;<a class="code" href="classqucs_1_1vector.html#ad52f7269b3ed8835ca4e520d44914b90">getDependencies</a> () != NULL) {
<a name="l00381"></a>00381     <span class="keywordflow">for</span> (<a class="code" href="classqucs_1_1strlistiterator.html">strlistiterator</a> it (v-&gt;<a class="code" href="classqucs_1_1vector.html#ad52f7269b3ed8835ca4e520d44914b90">getDependencies</a> ()); *it; ++it)
<a name="l00382"></a>00382       fprintf (f, <span class="stringliteral">&quot; %s&quot;</span>, *it);
<a name="l00383"></a>00383   }
<a name="l00384"></a>00384   fprintf (f, <span class="stringliteral">&quot;&gt;\n&quot;</span>);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386   <span class="comment">// print data itself</span>
<a name="l00387"></a>00387   printData (v, f);
<a name="l00388"></a>00388 
<a name="l00389"></a>00389   <span class="comment">// print data footer</span>
<a name="l00390"></a>00390   fprintf (f, <span class="stringliteral">&quot;&lt;/dep&gt;\n&quot;</span>);
<a name="l00391"></a>00391 }
<a name="l00392"></a>00392 
<a name="l00393"></a>00393 <span class="comment">/* This function is a helper routine for the print() functionality of</span>
<a name="l00394"></a>00394 <span class="comment">   the dataset class.  It prints the data items of the given vector</span>
<a name="l00395"></a>00395 <span class="comment">   object to the given output stream. */</span>
<a name="l00396"></a><a class="code" href="classqucs_1_1dataset.html#abbbae9bd327358906d8de26cc1f93be6">00396</a> <span class="keywordtype">void</span> dataset::printData (<a class="code" href="classqucs_1_1vector.html">vector</a> * <a class="code" href="parse__zvr_8y.html#ac4055e3a20b6b3af3d10590ea446ef6c">v</a>, FILE * f) {
<a name="l00397"></a>00397   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="parse__mdl_8y.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="parse__mdl_8y.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; v-&gt;<a class="code" href="classqucs_1_1vector.html#ad893d802d9c020bb3e39483d3ae1c81d">getSize</a> (); <a class="code" href="parse__mdl_8y.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>++) {
<a name="l00398"></a>00398     <a class="code" href="complex_8h.html#a7ad1a12245ad87a9d81d6bcc18afacae">nr_complex_t</a> <a class="code" href="parse__netlist_8y.html#a519cf159c27abd2374c9f649b9e9946d">c</a> = v-&gt;<a class="code" href="classqucs_1_1vector.html#abf17e9f8fb4f4b23f101ae3004d6ed76">get</a> (<a class="code" href="parse__mdl_8y.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>);
<a name="l00399"></a>00399     <span class="keywordflow">if</span> (<a class="code" href="namespacequcs.html#a16a24319c5ba4be87da57c1d40d6a8a1" title="Imaginary part matrix.">imag</a> (c) == 0.0) {
<a name="l00400"></a>00400       fprintf (f, <span class="stringliteral">&quot;  %+.&quot;</span> <span class="stringliteral">&quot;20&quot;</span> <span class="stringliteral">&quot;e\n&quot;</span>, (<span class="keywordtype">double</span>) <a class="code" href="namespacequcs.html#a0cc73c27d7d13b2200f2fddbb064dce6" title="Real part matrix.">real</a> (c));
<a name="l00401"></a>00401     }
<a name="l00402"></a>00402     <span class="keywordflow">else</span> {
<a name="l00403"></a>00403       fprintf (f, <span class="stringliteral">&quot;  %+.&quot;</span> <span class="stringliteral">&quot;20&quot;</span> <span class="stringliteral">&quot;e%cj%.&quot;</span> <span class="stringliteral">&quot;20&quot;</span> <span class="stringliteral">&quot;e\n&quot;</span>, (<span class="keywordtype">double</span>) <a class="code" href="namespacequcs.html#a0cc73c27d7d13b2200f2fddbb064dce6" title="Real part matrix.">real</a> (c), 
<a name="l00404"></a>00404                <a class="code" href="namespacequcs.html#a16a24319c5ba4be87da57c1d40d6a8a1" title="Imaginary part matrix.">imag</a> (c) &gt;= 0.0 ? <span class="charliteral">&#39;+&#39;</span> : <span class="charliteral">&#39;-&#39;</span>, (<span class="keywordtype">double</span>) fabs (<a class="code" href="namespacequcs.html#a16a24319c5ba4be87da57c1d40d6a8a1" title="Imaginary part matrix.">imag</a> (c)));
<a name="l00405"></a>00405     }
<a name="l00406"></a>00406   }
<a name="l00407"></a>00407 }
<a name="l00408"></a>00408 
<a name="l00409"></a>00409 <span class="comment">/* This static function read a full dataset from the given file and</span>
<a name="l00410"></a>00410 <span class="comment">   returns it.  On failure the function emits appropriate error</span>
<a name="l00411"></a>00411 <span class="comment">   messages and returns NULL. */</span>
<a name="l00412"></a><a class="code" href="classqucs_1_1dataset.html#a3619507dab8698e4abca5d60ccb6df67">00412</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00413"></a>00413   FILE * f;
<a name="l00414"></a>00414   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00415"></a>00415     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00416"></a>00416     <span class="keywordflow">return</span> NULL;
<a name="l00417"></a>00417   }
<a name="l00418"></a>00418   <a class="code" href="check__dataset_8h.html#a21fde9ef89e9c0311c2844e160cf6543">dataset_in</a> = f;
<a name="l00419"></a>00419   <a class="code" href="check__dataset_8h.html#a638352f67a54c5d818ecc03fbb69fc25">dataset_restart</a> (<a class="code" href="check__dataset_8h.html#a21fde9ef89e9c0311c2844e160cf6543">dataset_in</a>);
<a name="l00420"></a>00420   <span class="keywordflow">if</span> (<a class="code" href="check__dataset_8h.html#a0d3828f7fa03ee760a45aa4b3421141d">dataset_parse</a> () != 0) {
<a name="l00421"></a>00421     fclose (f);
<a name="l00422"></a>00422     <span class="keywordflow">return</span> NULL;
<a name="l00423"></a>00423   }
<a name="l00424"></a>00424   <span class="keywordflow">if</span> (<a class="code" href="check__dataset_8cpp.html#a390e206c28a70aa42027dd2e1aa064ef">dataset_result</a> != NULL) {
<a name="l00425"></a>00425     <span class="keywordflow">if</span> (<a class="code" href="check__dataset_8cpp.html#ac85af843265281c58d5205f3229bbeb3">dataset_check</a> (<a class="code" href="check__dataset_8cpp.html#a390e206c28a70aa42027dd2e1aa064ef">dataset_result</a>) != 0) {
<a name="l00426"></a>00426       fclose (f);
<a name="l00427"></a>00427       <span class="keyword">delete</span> <a class="code" href="check__dataset_8cpp.html#a390e206c28a70aa42027dd2e1aa064ef">dataset_result</a>;
<a name="l00428"></a>00428       <span class="keywordflow">return</span> NULL;
<a name="l00429"></a>00429     }
<a name="l00430"></a>00430   }
<a name="l00431"></a>00431   fclose (f);
<a name="l00432"></a>00432   <a class="code" href="check__dataset_8h.html#a1ded52d313f1f734877884e705946fb7">dataset_lex_destroy</a> ();
<a name="l00433"></a>00433   <a class="code" href="check__dataset_8cpp.html#a390e206c28a70aa42027dd2e1aa064ef">dataset_result</a>-&gt;setFile (file);
<a name="l00434"></a>00434   <span class="keywordflow">return</span> <a class="code" href="check__dataset_8cpp.html#a390e206c28a70aa42027dd2e1aa064ef">dataset_result</a>;
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 
<a name="l00437"></a>00437 <span class="comment">/* This static function read a full dataset from the given touchstone</span>
<a name="l00438"></a>00438 <span class="comment">   file and returns it.  On failure the function emits appropriate</span>
<a name="l00439"></a>00439 <span class="comment">   error messages and returns NULL. */</span>
<a name="l00440"></a><a class="code" href="classqucs_1_1dataset.html#aa662f68edef21ce0b9f2e6e4a9686bc5">00440</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load_touchstone (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00441"></a>00441   FILE * f;
<a name="l00442"></a>00442   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00443"></a>00443     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00444"></a>00444     <span class="keywordflow">return</span> NULL;
<a name="l00445"></a>00445   }
<a name="l00446"></a>00446   <a class="code" href="check__touchstone_8h.html#a255bdeab84cb65ea6633e97395e4abbd">touchstone_in</a> = f;
<a name="l00447"></a>00447   <a class="code" href="check__touchstone_8h.html#af20664e94ec9129ffc26f8c6c64f4ba7">touchstone_restart</a> (<a class="code" href="check__touchstone_8h.html#a255bdeab84cb65ea6633e97395e4abbd">touchstone_in</a>);
<a name="l00448"></a>00448   <span class="keywordflow">if</span> (<a class="code" href="check__touchstone_8h.html#a851cdb440d5de6548e607e12cd24fad1">touchstone_parse</a> () != 0) {
<a name="l00449"></a>00449     fclose (f);
<a name="l00450"></a>00450     <span class="keywordflow">return</span> NULL;
<a name="l00451"></a>00451   }
<a name="l00452"></a>00452   <span class="keywordflow">if</span> (<a class="code" href="check__touchstone_8cpp.html#af67152aa6297205823a5c564a8f56a27">touchstone_check</a> () != 0) {
<a name="l00453"></a>00453     fclose (f);
<a name="l00454"></a>00454     <span class="keywordflow">return</span> NULL;
<a name="l00455"></a>00455   }
<a name="l00456"></a>00456   fclose (f);
<a name="l00457"></a>00457   <a class="code" href="check__touchstone_8h.html#a4110be334114ef3d475e5bb8f57df455">touchstone_lex_destroy</a> ();
<a name="l00458"></a>00458   <a class="code" href="check__touchstone_8cpp.html#a9447986b554680cd24c917e2d31699b4">touchstone_result</a>-&gt;setFile (file);
<a name="l00459"></a>00459   <span class="keywordflow">return</span> <a class="code" href="check__touchstone_8cpp.html#a9447986b554680cd24c917e2d31699b4">touchstone_result</a>;
<a name="l00460"></a>00460 }
<a name="l00461"></a>00461 
<a name="l00462"></a>00462 <span class="comment">/* This static function read a full dataset from the given CSV file</span>
<a name="l00463"></a>00463 <span class="comment">   and returns it.  On failure the function emits appropriate error</span>
<a name="l00464"></a>00464 <span class="comment">   messages and returns NULL. */</span>
<a name="l00465"></a><a class="code" href="classqucs_1_1dataset.html#ab3d74780fbf42c3bb86588d856a6918e">00465</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load_csv (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00466"></a>00466   FILE * f;
<a name="l00467"></a>00467   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00468"></a>00468     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00469"></a>00469     <span class="keywordflow">return</span> NULL;
<a name="l00470"></a>00470   }
<a name="l00471"></a>00471   <a class="code" href="check__csv_8h.html#ac66a3a3b91feea3a6ab3454ca27b298b">csv_in</a> = f;
<a name="l00472"></a>00472   <a class="code" href="check__csv_8h.html#a5367648e154d1457c473d8046745ede7">csv_restart</a> (<a class="code" href="check__csv_8h.html#ac66a3a3b91feea3a6ab3454ca27b298b">csv_in</a>);
<a name="l00473"></a>00473   <span class="keywordflow">if</span> (<a class="code" href="check__csv_8h.html#a6cfca699ddde9172167514a219ffa5df">csv_parse</a> () != 0) {
<a name="l00474"></a>00474     fclose (f);
<a name="l00475"></a>00475     <span class="keywordflow">return</span> NULL;
<a name="l00476"></a>00476   }
<a name="l00477"></a>00477   <span class="keywordflow">if</span> (<a class="code" href="check__csv_8cpp.html#a41c1a4d959cc52c16c39f838e868b6fc">csv_check</a> () != 0) {
<a name="l00478"></a>00478     fclose (f);
<a name="l00479"></a>00479     <span class="keywordflow">return</span> NULL;
<a name="l00480"></a>00480   }
<a name="l00481"></a>00481   fclose (f);
<a name="l00482"></a>00482   <a class="code" href="check__csv_8h.html#aad614b39759cb7ac76f5e41af5a43a71">csv_lex_destroy</a> ();
<a name="l00483"></a>00483   <a class="code" href="check__csv_8cpp.html#adc9c5d4b393798b22f1a5e3e577babbe">csv_result</a>-&gt;setFile (file);
<a name="l00484"></a>00484   <span class="keywordflow">return</span> <a class="code" href="check__csv_8cpp.html#adc9c5d4b393798b22f1a5e3e577babbe">csv_result</a>;
<a name="l00485"></a>00485 }
<a name="l00486"></a>00486 
<a name="l00487"></a>00487 <span class="comment">/* The function read a full dataset from the given CITIfile and</span>
<a name="l00488"></a>00488 <span class="comment">   returns it.  On failure the function emits appropriate error</span>
<a name="l00489"></a>00489 <span class="comment">   messages and returns NULL. */</span>
<a name="l00490"></a><a class="code" href="classqucs_1_1dataset.html#a21ca6a163aea4c9073f3af3aa4bef416">00490</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load_citi (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00491"></a>00491   FILE * f;
<a name="l00492"></a>00492   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00493"></a>00493     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00494"></a>00494     <span class="keywordflow">return</span> NULL;
<a name="l00495"></a>00495   }
<a name="l00496"></a>00496   <a class="code" href="check__citi_8h.html#af8c3e3c4fac5a99eb4fc445ab544c7f4">citi_in</a> = f;
<a name="l00497"></a>00497   <a class="code" href="check__citi_8h.html#ac3ae84ab4f45db2c03ca4f2926795202">citi_restart</a> (<a class="code" href="check__citi_8h.html#af8c3e3c4fac5a99eb4fc445ab544c7f4">citi_in</a>);
<a name="l00498"></a>00498   <span class="keywordflow">if</span> (<a class="code" href="check__citi_8h.html#a85664af9058db832ffb74ec9172851b1">citi_parse</a> () != 0) {
<a name="l00499"></a>00499     fclose (f);
<a name="l00500"></a>00500     <span class="keywordflow">return</span> NULL;
<a name="l00501"></a>00501   }
<a name="l00502"></a>00502   <span class="keywordflow">if</span> (<a class="code" href="check__citi_8cpp.html#a5a907ce62f0a700abbbb4bbe5d884acd">citi_check</a> () != 0) {
<a name="l00503"></a>00503     fclose (f);
<a name="l00504"></a>00504     <span class="keywordflow">return</span> NULL;
<a name="l00505"></a>00505   }
<a name="l00506"></a>00506   fclose (f);
<a name="l00507"></a>00507   <a class="code" href="check__citi_8h.html#a75aed3099055e14c54ffc1841b8884e0">citi_lex_destroy</a> ();
<a name="l00508"></a>00508   <a class="code" href="check__citi_8cpp.html#ae045d63d7a61eeab291c06835a531804">citi_result</a>-&gt;setFile (file);
<a name="l00509"></a>00509   <span class="keywordflow">return</span> <a class="code" href="check__citi_8cpp.html#ae045d63d7a61eeab291c06835a531804">citi_result</a>;
<a name="l00510"></a>00510 }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512 <span class="comment">/* The function read a full dataset from the given ZVR file and</span>
<a name="l00513"></a>00513 <span class="comment">   returns it.  On failure the function emits appropriate error</span>
<a name="l00514"></a>00514 <span class="comment">   messages and returns NULL. */</span>
<a name="l00515"></a><a class="code" href="classqucs_1_1dataset.html#a036484bb058551cb0787cef4654209d9">00515</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load_zvr (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00516"></a>00516   FILE * f;
<a name="l00517"></a>00517   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00518"></a>00518     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00519"></a>00519     <span class="keywordflow">return</span> NULL;
<a name="l00520"></a>00520   }
<a name="l00521"></a>00521   <a class="code" href="check__zvr_8h.html#a7a956a2232b8ff6819a7143d5fa1ce0e">zvr_in</a> = f;
<a name="l00522"></a>00522   <a class="code" href="check__zvr_8h.html#a7153e3b8d1d97df9ab2394191d8088f9">zvr_restart</a> (<a class="code" href="check__zvr_8h.html#a7a956a2232b8ff6819a7143d5fa1ce0e">zvr_in</a>);
<a name="l00523"></a>00523   <span class="keywordflow">if</span> (<a class="code" href="check__zvr_8h.html#aaf2fd54c4d3edcee11513fbe80130ee8">zvr_parse</a> () != 0) {
<a name="l00524"></a>00524     fclose (f);
<a name="l00525"></a>00525     <span class="keywordflow">return</span> NULL;
<a name="l00526"></a>00526   }
<a name="l00527"></a>00527   <span class="keywordflow">if</span> (<a class="code" href="check__zvr_8cpp.html#a5f5e69da6cb5a471e3f7a36940ce339a">zvr_check</a> () != 0) {
<a name="l00528"></a>00528     fclose (f);
<a name="l00529"></a>00529     <span class="keywordflow">return</span> NULL;
<a name="l00530"></a>00530   }
<a name="l00531"></a>00531   fclose (f);
<a name="l00532"></a>00532   <a class="code" href="check__zvr_8h.html#aae0cfa27bbb950d84b326d1c7c3e6220">zvr_lex_destroy</a> ();
<a name="l00533"></a>00533   <span class="keywordflow">if</span> (<a class="code" href="check__zvr_8cpp.html#a7a1e392cdd4ce2967c0aceda952a8f12">zvr_result</a>) <a class="code" href="check__zvr_8cpp.html#a7a1e392cdd4ce2967c0aceda952a8f12">zvr_result</a>-&gt;setFile (file);
<a name="l00534"></a>00534   <span class="keywordflow">return</span> <a class="code" href="check__zvr_8cpp.html#a7a1e392cdd4ce2967c0aceda952a8f12">zvr_result</a>;
<a name="l00535"></a>00535 }
<a name="l00536"></a>00536 
<a name="l00537"></a>00537 <span class="comment">/* The function read a full dataset from the given MDL file and</span>
<a name="l00538"></a>00538 <span class="comment">   returns it.  On failure the function emits appropriate error</span>
<a name="l00539"></a>00539 <span class="comment">   messages and returns NULL. */</span>
<a name="l00540"></a><a class="code" href="classqucs_1_1dataset.html#a1f08b60243788d442b02fb37a4fa9ec4">00540</a> <a class="code" href="classqucs_1_1dataset.html">dataset</a> * dataset::load_mdl (<span class="keyword">const</span> <span class="keywordtype">char</span> * file) {
<a name="l00541"></a>00541   FILE * f;
<a name="l00542"></a>00542   <span class="keywordflow">if</span> ((f = fopen (file, <span class="stringliteral">&quot;r&quot;</span>)) == NULL) {
<a name="l00543"></a>00543     <a class="code" href="logging_8c.html#abe06a8732a47a291606edcfac5e5146e">logprint</a> (<a class="code" href="logging_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;error loading `%s&#39;: %s\n&quot;</span>, file, strerror (errno));
<a name="l00544"></a>00544     <span class="keywordflow">return</span> NULL;
<a name="l00545"></a>00545   }
<a name="l00546"></a>00546   <a class="code" href="check__mdl_8h.html#a225db6e772d0683b88d8c1b677d17454">mdl_in</a> = f;
<a name="l00547"></a>00547   <a class="code" href="check__mdl_8h.html#a3b58416387486b76aa96ab4bc0da5d68">mdl_restart</a> (<a class="code" href="check__mdl_8h.html#a225db6e772d0683b88d8c1b677d17454">mdl_in</a>);
<a name="l00548"></a>00548   <span class="keywordflow">if</span> (<a class="code" href="check__mdl_8h.html#ae0bdf022c270533bb84a7a909aa4c594">mdl_parse</a> () != 0) {
<a name="l00549"></a>00549     fclose (f);
<a name="l00550"></a>00550     <span class="keywordflow">return</span> NULL;
<a name="l00551"></a>00551   }
<a name="l00552"></a>00552   <span class="keywordflow">if</span> (<a class="code" href="check__mdl_8cpp.html#a088333ace7d16230bd0a2570a0756fce">mdl_check</a> () != 0) {
<a name="l00553"></a>00553     fclose (f);
<a name="l00554"></a>00554     <span class="keywordflow">return</span> NULL;
<a name="l00555"></a>00555   }
<a name="l00556"></a>00556   fclose (f);
<a name="l00557"></a>00557   <a class="code" href="check__mdl_8h.html#a7bbfebbb2b8a7d472d882de2d41ac716">mdl_lex_destroy</a> ();
<a name="l00558"></a>00558   <span class="keywordflow">if</span> (<a class="code" href="check__mdl_8cpp.html#a590d00549e37676b585fa64c1057f0fb">mdl_result</a>) <a class="code" href="check__mdl_8cpp.html#a590d00549e37676b585fa64c1057f0fb">mdl_result</a>-&gt;setFile (file);
<a name="l00559"></a>00559   <span class="keywordflow">return</span> <a class="code" href="check__mdl_8cpp.html#a590d00549e37676b585fa64c1057f0fb">mdl_result</a>;
<a name="l00560"></a>00560 }
<a name="l00561"></a>00561 
<a name="l00562"></a>00562 } <span class="comment">// namespace qucs</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 13 2015 04:30:43 for Qucs-core by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
